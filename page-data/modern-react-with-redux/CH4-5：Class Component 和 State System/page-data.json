{"componentChunkName":"component---src-templates-blog-post-js","path":"/modern-react-with-redux/CH4-5ï¼šClass Component å’Œ State System/","result":{"data":{"site":{"siteMetadata":{"title":"Travel in Time.","author":"Zoe Yu"}},"markdownRemark":{"id":"d1b7310e-8e09-5bce-95d3-993a65288f9f","excerpt":"åœ¨ Hook System é‚„æ²’æœ‰å‡ºç¾æ™‚ï¼Œæ—©æœŸçš„ functional component æ˜¯æ²’è¾¦æ³•æ“æœ‰ stateï¼Œåªèƒ½ç”¨ä¾†å±•ç¤ºä¸€äº›å›ºå®šçš„å…§å®¹ï¼Œè³‡æ–™å¾€å¾€ç”±çˆ¶å±¤ props å‚³å…¥ã€åœ¨å‰µå»ºçš„æ™‚å€™ data å·²ç¶“è¢«æ±ºå®šå¥½äº†ã€‚ ç‚ºä»€éº¼éœ€è¦ Class Componentâ€¦","html":"<p>åœ¨ Hook System é‚„æ²’æœ‰å‡ºç¾æ™‚ï¼Œæ—©æœŸçš„ functional component æ˜¯æ²’è¾¦æ³•æ“æœ‰ stateï¼Œåªèƒ½ç”¨ä¾†å±•ç¤ºä¸€äº›å›ºå®šçš„å…§å®¹ï¼Œè³‡æ–™å¾€å¾€ç”±çˆ¶å±¤ props å‚³å…¥ã€åœ¨å‰µå»ºçš„æ™‚å€™ data å·²ç¶“è¢«æ±ºå®šå¥½äº†ã€‚</p>\n<br>\n<h5 id=\"ç‚ºä»€éº¼éœ€è¦-Class-Componentï¼Ÿ\" style=\"position:relative;\">ç‚ºä»€éº¼éœ€è¦ Class Componentï¼Ÿ<a href=\"#%E7%82%BA%E4%BB%80%E9%BA%BC%E9%9C%80%E8%A6%81-Class-Component%EF%BC%9F\" aria-label=\"ç‚ºä»€éº¼éœ€è¦ Class Componentï¼Ÿ permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h5>\n<p>åŸ·è¡Œ React å°ˆæ¡ˆæ™‚ï¼Œé¦–å…ˆ JS file è¢«ç€è¦½å™¨è¼‰å…¥ï¼Œé€™æ™‚å€™ App component æœƒè¢«å‰µå»ºï¼Œè£¡é¢çš„ç¨‹å¼ç¢¼ä¸€ä¸€è¢«åŸ·è¡Œï¼Œç„¶å¾Œæ‰æ˜¯å›å‚³ JSXã€è¢« ReactDOM æ¸²æŸ“åˆ°ç•«é¢ä¸Šã€‚</p>\n<p>å¦‚æœé‚£äº›ç¨‹å¼ç¢¼æ˜¯éåŒæ­¥çš„è©±ï¼Œå°±å¾—ç”¨ callback function æ‰èƒ½è™•ç†ï¼Œä½†çµæœè¿”å›çš„æ™‚å€™ï¼Œç•«é¢å¾€å¾€å·²ç¶“æ¸²æŸ“å®Œç•¢ï¼Œé€™æ™‚å€™ï¼Œå¦‚ä½•æ‰èƒ½è·Ÿ component æºé€šã€å»æ›´æ–°ç•«é¢å‘¢ï¼Ÿ</p>\n<p>æˆ‘å€‘éœ€è¦ class component ä¾†åšç‹€æ…‹ç®¡ç†ã€‚</p>\n<p>å®ƒä¸ä½†å¯ä»¥åƒ functional component ä¸€æ¨£ç”¢ç”Ÿ JSXï¼Œé‚„æ“æœ‰ç”Ÿå‘½é€±æœŸæ–¹æ³•ï¼Œè®“æˆ‘å€‘èƒ½åœ¨ç‰¹å®šæ™‚é–“é»åŸ·è¡Œç¨‹å¼ç¢¼ï¼Œå¦å¤–ä¹Ÿå…·å‚™ã€Œstate systemã€ä¾†ç®¡ç†ç‹€æ…‹ï¼Œå¯ä»¥æ–¹ä¾¿æ›´æ–°ç•«é¢ã€‚</p>\n<hr>\n<br>\n<br>\n<p>åœ¨æ”¹å¯« functional component ç‚º class component æ™‚ï¼Œæœ‰å¹¾é»è¦ç•™æ„ï¼š</p>\n<ol>\n<li>ä¸€å®šæ˜¯ JavaScript çš„é¡åˆ¥</li>\n<li>ä¸€å®šè¦ç¹¼æ‰¿ <code class=\"language-text\">React.Component</code>ï¼ˆextendsï¼‰</li>\n<li>ä¸€å®šè¦å®šç¾© <code class=\"language-text\">render</code> æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯å…ƒä»¶è¦å›å‚³çš„ JSX</li>\n</ol>\n<pre class=\"grvsc-container visual-studio-dark\" data-language=\"javascript\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// functional component</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">const</span><span class=\"mtk1\"> App = () </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk13\">&lt;</span><span class=\"mtk4\">div</span><span class=\"mtk13\">&gt;</span><span class=\"mtk1\">Hi</span><span class=\"mtk13\">&lt;/</span><span class=\"mtk4\">div</span><span class=\"mtk13\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// class component</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">class</span><span class=\"mtk1\"> App </span><span class=\"mtk4\">extends</span><span class=\"mtk1\"> React.Component {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  render() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk13\">&lt;</span><span class=\"mtk4\">div</span><span class=\"mtk13\">&gt;</span><span class=\"mtk1\">Hi</span><span class=\"mtk13\">&lt;/</span><span class=\"mtk4\">div</span><span class=\"mtk13\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>ä½¿ç”¨ <code class=\"language-text\">class</code> keyword å°‡åœ¨ JS å‰µå»ºé¡åˆ¥ï¼Œè€Œå®šç¾©ä¸€å€‹ React component é¡åˆ¥ï¼Œéœ€è¦è®“å®ƒç¹¼æ‰¿ <code class=\"language-text\">React.Component</code>ï¼Œåœ¨ <code class=\"language-text\">React.Component</code> è£¡é¢æä¾›å¾ˆå¤šæ–¹æ³•ã€æˆ‘å€‘ä¸éœ€è¦è‡ªå·±å¯«ï¼Œå› ç‚ºç¹¼æ‰¿çš„é—œä¿‚èƒ½å¤ ç›´æ¥å€Ÿç”¨éä¾†ï¼ˆåŸå‹ç¹¼æ‰¿ï¼‰ã€‚</p>\n<p>æˆ‘å€‘ä¾ç…§ç¨‹å¼çš„éœ€æ±‚å†ä¾†æ±ºå®šè¦ä½¿ç”¨å“ªäº›æ–¹æ³•ï¼Œä½†åœ¨ <code class=\"language-text\">React.Component</code> ä¸­æœ‰å€‹ subclass æ˜¯ä¸€å®šè¦å¯¦ä½œçš„ï¼Œå°±æ˜¯å®šç¾© component è©²æ€éº¼æ¸²æŸ“çš„ <code class=\"language-text\">render</code> æ–¹æ³•ï¼Œå’ŒåŸæœ¬å¯« functional component çš„ return å¾ˆç›¸åƒï¼Œéƒ½æ˜¯ç”¨åœ¨å›å‚³å…ƒä»¶éœ€è¦çš„ JSXã€‚</p>\n<hr>\n<br>\n<h4 id=\"React-State-System\" style=\"position:relative;\">React State System<a href=\"#React-State-System\" aria-label=\"React State System permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<ul>\n<li>åªæœ‰ class component æ‰èƒ½æ“æœ‰ stateï¼ˆ<del>é€™é»åœ¨ React 16.8 ä¹‹å¾Œè¢«æ‰“ç ´</del>ï¼‰</li>\n<li>åˆå­¸è€…å®¹æ˜“æŠŠå®ƒå’Œ props æ··æ·†</li>\n<li>state æ˜¯ä¸€å€‹ JS ç‰©ä»¶ï¼Œæœƒå­˜æ”¾å’Œå…ƒä»¶æœ‰é—œçš„ data</li>\n<li>state è¦åœ¨å‰µå»ºå…ƒä»¶æ™‚å°±è¢«åˆå§‹åŒ–</li>\n<li>state åªèƒ½é€é <code class=\"language-text\">setState</code> æ–¹æ³•æ›´æ–°ï¼Œä¸èƒ½ç”¨ä¸€èˆ¬ JavaScript ç¿’æ…£çš„è³¦å€¼</li>\n<li>æ›´æ–° state ç‹€æ…‹æœƒä¿ƒä½¿ component é‡æ–°æ¸²æŸ“ => æ›å¥è©±èªªï¼Œæƒ³è¦è®“ç•«é¢è®Šå‹•ï¼Œè¦é€é <code class=\"language-text\">setState</code> æ–¹æ³•ä¾†æ›´æ–° state</li>\n</ul>\n<br>\n<h5 id=\"åˆå§‹åŒ–-state\" style=\"position:relative;\">åˆå§‹åŒ– state<a href=\"#%E5%88%9D%E5%A7%8B%E5%8C%96-state\" aria-label=\"åˆå§‹åŒ– state permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h5>\n<p>state è¦åœ¨å‰µé€ å…ƒä»¶æ™‚å°±è¢«åˆå§‹åŒ–ï¼Œé€™æ¨£åœ¨ <code class=\"language-text\">render</code> æ–¹æ³•å°±èƒ½ä½¿ç”¨åˆ°è®Šæ•¸ï¼Œä¹‹å¾Œçš„æŸå€‹æ™‚é–“é»åŒæ¨£ä¹Ÿå¯ä»¥ç”¨ <code class=\"language-text\">setState</code> é€²è¡Œæ›´æ–°ä¾†é‡æ–°æ¸²æŸ“ã€‚</p>\n<p>è€Œè¦åšåˆ°é€™ä¸€é»ï¼Œåœ¨ JavaScript ä¸­æœ‰ä¸€å€‹æœƒéš¨è‘— class ä¸€åŒå»ºç«‹ä¸¦åˆå§‹åŒ–ç‰©ä»¶çš„ç‰¹æ®Šæ–¹æ³•ã€æœƒåœ¨é€²è¡Œå…¶ä»–äº‹æƒ…ä¹‹å‰å…ˆè¢«è‡ªå‹•èª¿ç”¨ï¼Œå¾ˆé©åˆæ‹¿ä¾†åˆå§‹åŒ– stateï¼Œé‚£å°±æ˜¯ <strong>constructor</strong>ï¼ˆæ§‹é€ å‡½æ•¸ï¼‰ã€‚</p>\n<br>\n<blockquote>\n<p><strong>constructor æ§‹é€ å‡½æ•¸</strong></p>\n</blockquote>\n<p>åƒè€ƒã€Œ <a href=\"https://overreacted.io/zh-hant/why-do-we-write-super-props/\">ç‚ºä»€éº¼æˆ‘å€‘è¦å¯« super(props) </a>ã€ï¼Œç•¶ä½ å‘¼å« constructor å»ºæ§‹å­å¾Œã€åƒæ•¸å¸¶å…¥çˆ¶å±¤å‚³éçš„ propsï¼ŒJavaScript è¦å®šå¿…é ˆå…ˆå‘¼å« super functionï¼Œæ‰èƒ½ä½¿ç”¨ <code class=\"language-text\">this</code>ã€‚</p>\n<p>åŸå› æ˜¯ï¼Œæˆ‘å€‘ç¾åœ¨æ˜¯å€Ÿç”¨ <code class=\"language-text\">React.Component</code> çš„æ–¹æ³•ï¼Œç•¶æˆ‘å€‘åœ¨ App è£¡é¢å‘¼å« constructor æ™‚ï¼Œå¯¦éš›ä¸Šæ­£åœ¨è¦†è“‹æ‰ <code class=\"language-text\">React.Component</code> åŸæœ¬çš„ constructor è¨­ç½®ï¼Œç‚ºäº†è¦ç¢ºä¿é‚£äº›è¨­ç½®å¯ä»¥è¢«æ­£å¸¸ä½¿ç”¨ï¼Œæ‰æœƒå‘¼å« super => æŒ‡ç¤ºå®ƒå»åƒç…§çˆ¶é¡åˆ¥çš„ constructorã€‚</p>\n<pre class=\"grvsc-container visual-studio-dark\" data-language=\"javascript\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">super</span><span class=\"mtk1\">(props)  </span><span class=\"mtk3\">// æ˜¯å°çˆ¶é¡æ§‹é€ å‡½æ•¸çš„å¼•ç”¨</span></span></span></code></pre>\n<p>åœ¨ super è¢«å‘¼å«å‰ï¼ŒJavaScript ä¸å…è¨±æˆ‘å€‘å»ä½¿ç”¨ <code class=\"language-text\">this</code>ï¼Œæ˜¯ç‚ºäº†é¿å…é‡åˆ°ä»¥ä¸‹é€™ç¨®æƒ…æ³ï¼š</p>\n<p>ä¾‹å¦‚ï¼šåœ¨é‚„æ²’æœ‰è¨­ç½®å‰å°±å…ˆè¢«å‘¼å«</p>\n<pre class=\"grvsc-container visual-studio-dark\" data-language=\"javascript\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">class</span><span class=\"mtk1\"> Person {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">constructor</span><span class=\"mtk1\">(name) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">this</span><span class=\"mtk1\">.name = name;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">class</span><span class=\"mtk1\"> PolitePerson </span><span class=\"mtk4\">extends</span><span class=\"mtk1\"> Person {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">constructor</span><span class=\"mtk1\">(name) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">this</span><span class=\"mtk1\">.greetColleagues(); </span><span class=\"mtk3\">// ğŸ”´ ä¸è¢«å…è¨±</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">super</span><span class=\"mtk1\">(name);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  greetColleagues() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    alert(</span><span class=\"mtk11\">&#39;My name is &#39;</span><span class=\"mtk1\"> + </span><span class=\"mtk4\">this</span><span class=\"mtk1\">.name + </span><span class=\"mtk11\">&#39;, nice to meet you!&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>å¸¶å…¥ props ä¹Ÿæ˜¯é¡ä¼¼çš„å½¢å¼ï¼Œè®“ constructor åˆå§‹åŒ– <code class=\"language-text\">this.props</code>ï¼Œæ¥ä¸‹ä¾†ä¹Ÿå¯ä»¥è¨­ç½®ç‹€æ…‹ï¼Œå‰µå»ºä¸€å€‹ state ç‰©ä»¶æŒ‡æ´¾çµ¦ <code class=\"language-text\">this.state</code> è®Šæ•¸</p>\n<pre class=\"grvsc-container visual-studio-dark\" data-language=\"javascript\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// React å…§éƒ¨</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">class</span><span class=\"mtk1\"> Component {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">constructor</span><span class=\"mtk1\">(props) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">this</span><span class=\"mtk1\">.props = props;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">class</span><span class=\"mtk1\"> App </span><span class=\"mtk4\">extends</span><span class=\"mtk1\"> React.Component {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">constructor</span><span class=\"mtk1\">(props) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">super</span><span class=\"mtk1\">(props)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">this</span><span class=\"mtk1\">.state = { lat: </span><span class=\"mtk4\">null</span><span class=\"mtk1\"> } </span><span class=\"mtk3\">// åˆå§‹åŒ– state æ‰æœƒç”¨ assignment</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  render() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk13\">&lt;</span><span class=\"mtk4\">div</span><span class=\"mtk13\">&gt;</span><span class=\"mtk1\">Latitude: </span><span class=\"mtk4\">{this</span><span class=\"mtk1\">.state.lat</span><span class=\"mtk4\">}</span><span class=\"mtk13\">&lt;/</span><span class=\"mtk4\">div</span><span class=\"mtk13\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<hr>\n<br>\n<h5 id=\"æ›´æ–°-state\" style=\"position:relative;\">æ›´æ–° state<a href=\"#%E6%9B%B4%E6%96%B0-state\" aria-label=\"æ›´æ–° state permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h5>\n<p>ä¸€èˆ¬è·Ÿæ¸²æŸ“ç„¡é—œçš„æ“ä½œï¼Œä¸æœƒå°‡ç¨‹å¼ç¢¼å¯«åœ¨ <code class=\"language-text\">render</code> æ–¹æ³•è£¡é¢ï¼Œå› ç‚º <code class=\"language-text\">render</code> æ–¹æ³•å¾ˆå¸¸è¢«å‘¼å«ï¼Œç‚ºäº†é¿å…é‡è¤‡å–å¾—åŸ·è¡Œçµæœï¼Œé€šå¸¸ä¸æœƒå°‡é‚è¼¯å¯«åœ¨é€™è£ã€‚</p>\n<p>åˆå§‹åŒ–çš„è©±ï¼Œé™¤äº†ä¹‹å¾Œä»‹ç´¹çš„ç”Ÿå‘½é€±æœŸæ–¹æ³•ï¼Œä¹Ÿå¯ä»¥å¯«åœ¨ constructor è£¡é¢ï¼š</p>\n<ul>\n<li>å‡è¨­æœ‰ç‹€æ…‹ lat å’Œ errorMessage å…©å€‹ï¼Œåˆ†åˆ¥æœƒåœ¨ç²å¾—ä¸åŒçš„çµæœæ™‚æ›´æ–°</li>\n<li>ä¸éœ€æ¯æ¬¡æ›´æ–°å…¨éƒ¨å±¬æ€§ï¼Œå¯ä»¥<strong>åªé‡å°æˆ‘å€‘è¦èª¿æ•´çš„å€¼</strong>ï¼Œå®ƒä¸æœƒç§»é™¤å±¬æ€§</li>\n</ul>\n<pre class=\"grvsc-container visual-studio-dark\" data-language=\"javascript\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">class</span><span class=\"mtk1\"> App </span><span class=\"mtk4\">extends</span><span class=\"mtk1\"> React.Component {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">constructor</span><span class=\"mtk1\">(props) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">super</span><span class=\"mtk1\">(props)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">this</span><span class=\"mtk1\">.state = { lat: </span><span class=\"mtk4\">null</span><span class=\"mtk1\">, errorMessage: </span><span class=\"mtk11\">&#39;&#39;</span><span class=\"mtk1\"> }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    window.navigator.geolocation.getCurrentPosition(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        (position) </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk3\">// call setState method if updating</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk4\">this</span><span class=\"mtk1\">.setState({ lat: position.coords.latitude })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        (err) </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk3\">// error handling</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk4\">this</span><span class=\"mtk1\">.setState({ errorMessage: err.message })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    );</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  render() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk13\">&lt;</span><span class=\"mtk4\">div</span><span class=\"mtk13\">&gt;</span><span class=\"mtk1\">Latitude:</span><span class=\"mtk13\">&lt;/</span><span class=\"mtk4\">div</span><span class=\"mtk13\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>ç¸½çµï¼Œç›®å‰æµç¨‹å¦‚ä¸‹</p>\n<ol>\n<li>ç€è¦½å™¨åŠ è¼‰ XML æ–‡ä»¶ï¼Œè«‹æ±‚ JavaScript file ç„¶å¾ŒåŸ·è¡Œ</li>\n<li>å‰µå»º App</li>\n<li>class component å…ˆèª¿ç”¨çš„æ˜¯ <code class=\"language-text\">constructor</code> å‡½æ•¸ï¼Œå‘¼å« super å¼•ç”¨ <code class=\"language-text\">React.Component</code> è¨­å®š</li>\n<li>åˆå§‹åŒ–ç‹€æ…‹ï¼Œå‰µå»º state object ä¸¦æŒ‡é…çµ¦ <code class=\"language-text\">this.state</code> é€™å€‹ç‰¹æ®Šçš„è®Šæ•¸</li>\n<li>åŸ·è¡Œ render æ–¹æ³•ï¼Œå›å‚³ JSX</li>\n<li>å¦‚æœéœ€è¦æ›´æ–°ç‹€æ…‹ï¼Œå¾—å‘¼å« <code class=\"language-text\">this.setState</code> é€™å€‹å…§å»ºçš„ç‰¹æ®Šå‡½å¼ï¼Œå‚³å…¥æ–°çš„ç‹€æ…‹</li>\n<li>åœ¨ <code class=\"language-text\">this.setState</code> å¾Œï¼ŒReact è‡ªå‹•æœƒçŸ¥é“æˆ‘å€‘å·²ç¶“æ›´æ–°å±¬æ€§ï¼Œç«‹å³é‡æ–°æ¸²æŸ“å…ƒä»¶</li>\n</ol>\n<br>\n<p>å…¶ä»–åƒè€ƒè³‡æ–™ï¼š <a href=\"https://www.digitalocean.com/community/tutorials/react-constructors-with-react-components\">Understanding Constructors with React Components</a></p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .visual-studio-dark {\n    background-color: #1E1E1E;\n    color: #D4D4D4;\n  }\n  .visual-studio-dark .mtk3 { color: #6A9955; }\n  .visual-studio-dark .mtk4 { color: #569CD6; }\n  .visual-studio-dark .mtk1 { color: #D4D4D4; }\n  .visual-studio-dark .mtk13 { color: #808080; }\n  .visual-studio-dark .mtk11 { color: #CE9178; }\n  .visual-studio-dark .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","tableOfContents":"<ul>\n<li>\n<ul>\n<li><a href=\"/modern-react-with-redux/CH4-5%EF%BC%9AClass%20Component%20%E5%92%8C%20State%20System/#%E7%82%BA%E4%BB%80%E9%BA%BC%E9%9C%80%E8%A6%81-class-component%EF%BC%9F\">ç‚ºä»€éº¼éœ€è¦ Class Componentï¼Ÿ</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/modern-react-with-redux/CH4-5%EF%BC%9AClass%20Component%20%E5%92%8C%20State%20System/#react-state-system\">React State System</a></p>\n<ul>\n<li><a href=\"/modern-react-with-redux/CH4-5%EF%BC%9AClass%20Component%20%E5%92%8C%20State%20System/#%E5%88%9D%E5%A7%8B%E5%8C%96-state\">åˆå§‹åŒ– state</a></li>\n<li><a href=\"/modern-react-with-redux/CH4-5%EF%BC%9AClass%20Component%20%E5%92%8C%20State%20System/#%E6%9B%B4%E6%96%B0-state\">æ›´æ–° state</a></li>\n</ul>\n</li>\n</ul>","frontmatter":{"title":"CH4/5ï¼šClass Component å’Œ State System","type":"coding","date":"Jun 15, 2021","tags":["React","Udemy"],"category":"Modern React with Redux","log":null,"thumbnail":null}}},"pageContext":{"slug":"/modern-react-with-redux/CH4-5ï¼šClass Component å’Œ State System/","previous":{"fields":{"slug":"/modern-react-with-redux/CH2-3ï¼šèªè­˜ JSX å’Œ Component ç‰¹æ€§/"},"frontmatter":{"title":"CH2/3ï¼šèªè­˜ JSX å’Œ Component ç‰¹æ€§","tags":["React","Udemy"],"date":"2021-06-14","category":"Modern React with Redux","mark":null,"description":"JSX å’Œ HTML çš„å·®åˆ¥ã€èªè­˜ Component çš„è¤‡ç”¨æ€§èˆ‡å·¢ç‹€çµæ§‹","log":"log"}},"next":{"fields":{"slug":"/modern-react-with-redux/CH6ï¼šè¨è«–ç”Ÿå‘½é€±æœŸ/"},"frontmatter":{"title":"CH6ï¼šè¨è«–ç”Ÿå‘½é€±æœŸ","tags":["React","Udemy"],"date":"2021-06-16","category":"Modern React with Redux","mark":null,"description":"","log":"list"}}}},"staticQueryHashes":["63159454"]}